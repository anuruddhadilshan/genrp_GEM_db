# Date/Time = Fri Jan 1 11:00:00 2021 
# start database from the beginning of time 
-------[ 2021-01-01 00:00:00 ] 
# database format: the tracker consists of a collection of modules: 
# database properties will be organized by module, not by "plane" as in old SBS-offline

# Geometry and calibration/decode information:

# BigBite GEMs as in the GMN run: Layer 0 = U/V (1 module), Layer 1 = 3X INFN X/Y, Layer 2 = 1X U/V, Layer 3 = 3X INFN X/Y, Layer 4 = 4X UVA X/Y
bb.gem.modules = m0 m1 m2 m3  m4 m5 m6 m7  m8 m9 m10 m11  m12 m13 m14 m15  m16 m17 m18 m19  m20 m21 m22 m23  m24 m25 m26 m27  m28 m29 m30 m31  m32 m32 m34 m35  m36 m37 m38 m39

bb.gem.m0.layer = 0
bb.gem.m1.layer = 0
bb.gem.m2.layer = 0
bb.gem.m3.layer = 0

bb.gem.m4.layer = 1
bb.gem.m5.layer = 1
bb.gem.m6.layer = 1
bb.gem.m7.layer = 1

bb.gem.m8.layer = 2
bb.gem.m9.layer = 2
bb.gem.m10.layer = 2
bb.gem.m11.layer = 2

bb.gem.m12.layer = 3
bb.gem.m13.layer = 3
bb.gem.m14.layer = 3
bb.gem.m15.layer = 3

bb.gem.m16.layer = 4
bb.gem.m17.layer = 4
bb.gem.m18.layer = 4
bb.gem.m19.layer = 4

bb.gem.m20.layer = 5
bb.gem.m21.layer = 5
bb.gem.m22.layer = 5
bb.gem.m23.layer = 5

bb.gem.m24.layer = 6
bb.gem.m25.layer = 6
bb.gem.m26.layer = 6
bb.gem.m27.layer = 6

bb.gem.m28.layer = 7
bb.gem.m29.layer = 7
bb.gem.m30.layer = 7
bb.gem.m31.layer = 7

bb.gem.m32.layer = 8
bb.gem.m33.layer = 8
bb.gem.m34.layer = 8
bb.gem.m35.layer = 8

bb.gem.m36.layer = 9
bb.gem.m37.layer = 9
bb.gem.m38.layer = 9
bb.gem.m39.layer = 9

# APV mapping configurations: 0 = INFN, 1 = UVA X/Y, 2 = UVA U/V


bb.gem.m0.apvmap = 1
bb.gem.m1.apvmap = 1
bb.gem.m2.apvmap = 1
bb.gem.m3.apvmap = 1

bb.gem.m4.apvmap = 1
bb.gem.m5.apvmap = 1
bb.gem.m6.apvmap = 1
bb.gem.m7.apvmap = 1

bb.gem.m8.apvmap = 1
bb.gem.m9.apvmap = 1
bb.gem.m10.apvmap = 1
bb.gem.m11.apvmap = 1

bb.gem.m12.apvmap = 1
bb.gem.m13.apvmap = 1
bb.gem.m14.apvmap = 1
bb.gem.m15.apvmap = 1

bb.gem.m16.apvmap = 1
bb.gem.m17.apvmap = 1
bb.gem.m18.apvmap = 1
bb.gem.m19.apvmap = 1

bb.gem.m20.apvmap = 1
bb.gem.m21.apvmap = 1
bb.gem.m22.apvmap = 1
bb.gem.m23.apvmap = 1

bb.gem.m24.apvmap = 1
bb.gem.m25.apvmap = 1
bb.gem.m26.apvmap = 1
bb.gem.m27.apvmap = 1

bb.gem.m28.apvmap = 1
bb.gem.m29.apvmap = 1
bb.gem.m30.apvmap = 1
bb.gem.m31.apvmap = 1

bb.gem.m32.apvmap = 1
bb.gem.m33.apvmap = 1
bb.gem.m34.apvmap = 1
bb.gem.m35.apvmap = 1

bb.gem.m36.apvmap = 1
bb.gem.m37.apvmap = 1
bb.gem.m38.apvmap = 1
bb.gem.m39.apvmap = 1


# basic flags controlling decoding:
bb.gem.pedestalmode = 0
bb.gem.commonmode_flag = 1 # "Danning method" cm subtraction
bb.gem.chan_cm_flags = 512 # defines the "dummy" reference channel for storing the cm_enable and build_all_samples flags
bb.gem.commonmode_nstriplo = 20
bb.gem.commonmode_nstriphi = 20
bb.gem.commonmode_niter = 3
bb.gem.commonmode_minstrips = 20
bb.gem.plot_common_mode = 1
bb.gem.pedsub_online = 1 # normally this should always be set to 1
bb.gem.dump_geometry_info = 1
bb.gem.efficiency_bin_width_1D = 0.02
bb.gem.efficiency_bin_width_2D = 0.02
bb.gem.commonmode_range_nsigma = 5.0

bb.gem.m1.commonmode_range_nsigma = 10.0
bb.gem.m2.commonmode_range_nsigma = 10.0
bb.gem.m3.commonmode_range_nsigma = 10.0

# these may need adjusting:
bb.gem.usestriptimingcut = 0
bb.gem.useTSchi2cut = 0
bb.gem.maxstrip_t0 = 85.4
bb.gem.maxstrip_tcut = 21.0
bb.gem.addstrip_tcut = 21.0
bb.gem.addstrip_ccor_cut = 0.4
bb.gem.suppressfirstlast = 0

bb.gem.plot_event_info = 1

# to start with, let's not worry about the misalignments, let's put everything at its nominal/ideal position:

#bb.gem.m0.position = 0 0 0

# initial guesses:
# in the INFN X/Y layers, the "GEMPOS" index that defines the global module number runs from bottom to top
# in the UVA X/Y layer, the "GEMPOS" index that defines the global module number runs from top to bottom
bb.gem.m0.position = -0.768 0 1.570
bb.gem.m1.position = -0.256 0 1.534
bb.gem.m2.position = 0.256 0 1.570
bb.gem.m3.position = 0.768 0 1.534

bb.gem.m4.position = -0.768 0 1.570
bb.gem.m5.position = -0.256 0 1.534
bb.gem.m6.position = 0.256 0 1.570
bb.gem.m7.position = 0.768 0 1.534

bb.gem.m8.position = -0.768 0 1.570
bb.gem.m9.position = -0.256 0 1.534
bb.gem.m10.position = 0.256 0 1.570
bb.gem.m11.position = 0.768 0 1.534

bb.gem.m12.position = -0.768 0 1.570
bb.gem.m13.position = -0.256 0 1.534
bb.gem.m14.position = 0.256 0 1.570
bb.gem.m15.position = 0.768 0 1.534

bb.gem.m16.position = -0.768 0 1.570
bb.gem.m17.position = -0.256 0 1.534
bb.gem.m18.position = 0.256 0 1.570
bb.gem.m19.position = 0.768 0 1.534

bb.gem.m20.position = -0.768 0 1.570
bb.gem.m21.position = -0.256 0 1.534
bb.gem.m22.position = 0.256 0 1.570
bb.gem.m23.position = 0.768 0 1.534

bb.gem.m24.position = -0.768 0 1.570
bb.gem.m25.position = -0.256 0 1.534
bb.gem.m26.position = 0.256 0 1.570
bb.gem.m27.position = 0.768 0 1.534

bb.gem.m28.position = -0.768 0 1.570
bb.gem.m29.position = -0.256 0 1.534
bb.gem.m30.position = 0.256 0 1.570
bb.gem.m31.position = 0.768 0 1.534

bb.gem.m32.position = -0.768 0 1.570
bb.gem.m33.position = -0.256 0 1.534
bb.gem.m34.position = 0.256 0 1.570
bb.gem.m35.position = 0.768 0 1.534

bb.gem.m36.position = -0.768 0 1.570
bb.gem.m37.position = -0.256 0 1.534
bb.gem.m38.position = 0.256 0 1.570
bb.gem.m39.position = 0.768 0 1.534



bb.gem.m0.angle =  0 0 0
bb.gem.m1.angle = 0 0 0
bb.gem.m2.angle = 0 0 0
bb.gem.m3.angle = 0 0 0

bb.gem.m4.angle =  0 0 0
bb.gem.m5.angle = 0 0 0
bb.gem.m6.angle = 0 0 0
bb.gem.m7.angle = 0 0 0

bb.gem.m8.angle =  0 0 0
bb.gem.m9.angle = 0 0 0
bb.gem.m10.angle = 0 0 0
bb.gem.m11.angle = 0 0 0

bb.gem.m12.angle =  0 0 0
bb.gem.m13.angle = 0 0 0
bb.gem.m14.angle = 0 0 0
bb.gem.m15.angle = 0 0 0

bb.gem.m16.angle =  0 0 0
bb.gem.m17.angle = 0 0 0
bb.gem.m18.angle = 0 0 0
bb.gem.m19.angle = 0 0 0

bb.gem.m20.angle =  0 0 0
bb.gem.m21.angle = 0 0 0
bb.gem.m22.angle = 0 0 0
bb.gem.m23.angle = 0 0 0

bb.gem.m24.angle =  0 0 0
bb.gem.m25.angle = 0 0 0
bb.gem.m26.angle = 0 0 0
bb.gem.m27.angle = 0 0 0

bb.gem.m28.angle =  0 0 0
bb.gem.m29.angle = 0 0 0
bb.gem.m30.angle = 0 0 0
bb.gem.m31.angle = 0 0 0

bb.gem.m32.angle =  0 0 0
bb.gem.m33.angle = 0 0 0
bb.gem.m34.angle = 0 0 0
bb.gem.m35.angle = 0 0 0

bb.gem.m36.angle =  0 0 0
bb.gem.m37.angle = 0 0 0
bb.gem.m38.angle = 0 0 0
bb.gem.m39.angle = 0 0 0



# we MAY need to adjust the size on the U/V layers, but for now let's just use a nominal 40x150 cm^2:


bb.gem.m0.size = 0.512 0.6144 0.001
bb.gem.m1.size = 0.512 0.6144 0.001
bb.gem.m2.size = 0.512 0.6144 0.001
bb.gem.m3.size = 0.512 0.6144 0.001

bb.gem.m4.size = 0.512 0.6144 0.001
bb.gem.m5.size = 0.512 0.6144 0.001
bb.gem.m6.size = 0.512 0.6144 0.001
bb.gem.m7.size = 0.512 0.6144 0.001

bb.gem.m8.size = 0.512 0.6144 0.001
bb.gem.m9.size = 0.512 0.6144 0.001
bb.gem.m10.size = 0.512 0.6144 0.001
bb.gem.m11.size = 0.512 0.6144 0.001

bb.gem.m12.size = 0.512 0.6144 0.001
bb.gem.m13.size = 0.512 0.6144 0.001
bb.gem.m14.size = 0.512 0.6144 0.001
bb.gem.m15.size = 0.512 0.6144 0.001

bb.gem.m16.size = 0.512 0.6144 0.001
bb.gem.m17.size = 0.512 0.6144 0.001
bb.gem.m18.size = 0.512 0.6144 0.001
bb.gem.m19.size = 0.512 0.6144 0.001

bb.gem.m20.size = 0.512 0.6144 0.001
bb.gem.m21.size = 0.512 0.6144 0.001
bb.gem.m22.size = 0.512 0.6144 0.001
bb.gem.m23.size = 0.512 0.6144 0.001

bb.gem.m24.size = 0.512 0.6144 0.001
bb.gem.m25.size = 0.512 0.6144 0.001
bb.gem.m26.size = 0.512 0.6144 0.001
bb.gem.m27.size = 0.512 0.6144 0.001

bb.gem.m28.size = 0.512 0.6144 0.001
bb.gem.m29.size = 0.512 0.6144 0.001
bb.gem.m30.size = 0.512 0.6144 0.001
bb.gem.m31.size = 0.512 0.6144 0.001

bb.gem.m32.size = 0.512 0.6144 0.001
bb.gem.m33.size = 0.512 0.6144 0.001
bb.gem.m34.size = 0.512 0.6144 0.001
bb.gem.m35.size = 0.512 0.6144 0.001

bb.gem.m36.size = 0.512 0.6144 0.001
bb.gem.m37.size = 0.512 0.6144 0.001
bb.gem.m38.size = 0.512 0.6144 0.001
bb.gem.m39.size = 0.512 0.6144 0.001


# strip angles (as measured wrt +X direction of transport coordinate system):

# in Sean's schematic, the pink strips are "V" and the blue strips are "U":
# both U and V strip indices run in the opposite direction from the +X axis of transport coordinates.
# the "U" angle should be -30 + 180 degrees or -30 - 180 degrees = 150 or -210 degrees
# the "V" angle should be 30 - 180 degrees or 30 + 180 degrees = 210 or -150 degrees


# for the INFN X/Y modules only the X-axis direction needs to be reversed

# for the UVA X/Y modules the "X" axis coincides with the direction of transport coordinates but the "Y" axis is opposite the direction of transport coordinates:
# as confirmed by Sean Jeffas:

bb.gem.m0.uangle = 0.0
bb.gem.m0.vangle = -90.0
bb.gem.m1.uangle = 0.0
bb.gem.m1.vangle = -90.0
bb.gem.m2.uangle = 0.0
bb.gem.m2.vangle = -90.0
bb.gem.m3.uangle = 0.0
bb.gem.m3.vangle = -90.0

bb.gem.m4.uangle = 0.0
bb.gem.m4.vangle = -90.0
bb.gem.m5.uangle = 0.0
bb.gem.m5.vangle = -90.0
bb.gem.m6.uangle = 0.0
bb.gem.m6.vangle = -90.0
bb.gem.m7.uangle = 0.0
bb.gem.m7.vangle = -90.0

bb.gem.m8.uangle = 0.0
bb.gem.m8.vangle = -90.0
bb.gem.m9.uangle = 0.0
bb.gem.m9.vangle = -90.0
bb.gem.m10.uangle = 0.0
bb.gem.m10.vangle = -90.0
bb.gem.m11.uangle = 0.0
bb.gem.m11.vangle = -90.0

bb.gem.m12.uangle = 0.0
bb.gem.m12.vangle = -90.0
bb.gem.m13.uangle = 0.0
bb.gem.m13.vangle = -90.0
bb.gem.m14.uangle = 0.0
bb.gem.m14.vangle = -90.0
bb.gem.m15.uangle = 0.0
bb.gem.m15.vangle = -90.0

bb.gem.m16.uangle = 0.0
bb.gem.m16.vangle = -90.0
bb.gem.m17.uangle = 0.0
bb.gem.m17.vangle = -90.0
bb.gem.m18.uangle = 0.0
bb.gem.m18.vangle = -90.0
bb.gem.m19.uangle = 0.0
bb.gem.m19.vangle = -90.0

bb.gem.m20.uangle = 0.0
bb.gem.m20.vangle = -90.0
bb.gem.m21.uangle = 0.0
bb.gem.m21.vangle = -90.0
bb.gem.m22.uangle = 0.0
bb.gem.m22.vangle = -90.0
bb.gem.m23.uangle = 0.0
bb.gem.m23.vangle = -90.0

bb.gem.m24.uangle = 0.0
bb.gem.m24.vangle = -90.0
bb.gem.m25.uangle = 0.0
bb.gem.m25.vangle = -90.0
bb.gem.m26.uangle = 0.0
bb.gem.m26.vangle = -90.0
bb.gem.m27.uangle = 0.0
bb.gem.m27.vangle = -90.0

bb.gem.m28.uangle = 0.0
bb.gem.m28.vangle = -90.0
bb.gem.m29.uangle = 0.0
bb.gem.m29.vangle = -90.0
bb.gem.m30.uangle = 0.0
bb.gem.m30.vangle = -90.0
bb.gem.m31.uangle = 0.0
bb.gem.m31.vangle = -90.0

bb.gem.m32.uangle = 0.0
bb.gem.m32.vangle = -90.0
bb.gem.m33.uangle = 0.0
bb.gem.m33.vangle = -90.0
bb.gem.m34.uangle = 0.0
bb.gem.m34.vangle = -90.0
bb.gem.m35.uangle = 0.0
bb.gem.m35.vangle = -90.0

bb.gem.m36.uangle = 0.0
bb.gem.m36.vangle = -90.0
bb.gem.m37.uangle = 0.0
bb.gem.m37.vangle = -90.0
bb.gem.m38.uangle = 0.0
bb.gem.m38.vangle = -90.0
bb.gem.m39.uangle = 0.0
bb.gem.m39.vangle = -90.0

# U/V strip offsets: for X/Y GEMS, INFN and UVA alike, we are probably safe to stick with (0,0).
# for U/V strip GEMs, the needed offsets are non-zero:

# U offsets:

bb.gem.m0.uoffset = 0.0
bb.gem.m1.uoffset = 0.0
bb.gem.m2.uoffset = 0.0
bb.gem.m3.uoffset = 0.0

bb.gem.m4.uoffset = 0.0
bb.gem.m5.uoffset = 0.0
bb.gem.m6.uoffset = 0.0
bb.gem.m7.uoffset = 0.0

bb.gem.m8.uoffset = 0.0
bb.gem.m9.uoffset = 0.0
bb.gem.m10.uoffset = 0.0
bb.gem.m11.uoffset = 0.0

bb.gem.m12.uoffset = 0.0
bb.gem.m13.uoffset = 0.0
bb.gem.m14.uoffset = 0.0
bb.gem.m15.uoffset = 0.0

bb.gem.m16.uoffset = 0.0
bb.gem.m17.uoffset = 0.0
bb.gem.m18.uoffset = 0.0
bb.gem.m19.uoffset = 0.0

bb.gem.m20.uoffset = 0.0
bb.gem.m21.uoffset = 0.0
bb.gem.m22.uoffset = 0.0
bb.gem.m23.uoffset = 0.0

bb.gem.m24.uoffset = 0.0
bb.gem.m25.uoffset = 0.0
bb.gem.m26.uoffset = 0.0
bb.gem.m27.uoffset = 0.0

bb.gem.m28.uoffset = 0.0
bb.gem.m29.uoffset = 0.0
bb.gem.m30.uoffset = 0.0
bb.gem.m31.uoffset = 0.0

bb.gem.m32.uoffset = 0.0
bb.gem.m33.uoffset = 0.0
bb.gem.m34.uoffset = 0.0
bb.gem.m35.uoffset = 0.0

bb.gem.m36.uoffset = 0.0
bb.gem.m37.uoffset = 0.0
bb.gem.m38.uoffset = 0.0
bb.gem.m39.uoffset = 0.0

# V offsets:

bb.gem.m0.voffset = 0.0
bb.gem.m1.voffset = 0.0
bb.gem.m2.voffset = 0.0
bb.gem.m3.voffset = 0.0

bb.gem.m4.voffset = 0.0
bb.gem.m5.voffset = 0.0
bb.gem.m6.voffset = 0.0
bb.gem.m7.voffset = 0.0

bb.gem.m8.voffset = 0.0
bb.gem.m9.voffset = 0.0
bb.gem.m10.voffset = 0.0
bb.gem.m11.voffset = 0.0

bb.gem.m12.voffset = 0.0
bb.gem.m13.voffset = 0.0
bb.gem.m14.voffset = 0.0
bb.gem.m15.voffset = 0.0

bb.gem.m16.voffset = 0.0
bb.gem.m17.voffset = 0.0
bb.gem.m18.voffset = 0.0
bb.gem.m19.voffset = 0.0

bb.gem.m20.voffset = 0.0
bb.gem.m21.voffset = 0.0
bb.gem.m22.voffset = 0.0
bb.gem.m23.voffset = 0.0

bb.gem.m24.voffset = 0.0
bb.gem.m25.voffset = 0.0
bb.gem.m26.voffset = 0.0
bb.gem.m27.voffset = 0.0

bb.gem.m28.voffset = 0.0
bb.gem.m29.voffset = 0.0
bb.gem.m30.voffset = 0.0
bb.gem.m31.voffset = 0.0

bb.gem.m32.voffset = 0.0
bb.gem.m33.voffset = 0.0
bb.gem.m34.voffset = 0.0
bb.gem.m35.voffset = 0.0

bb.gem.m36.voffset = 0.0
bb.gem.m37.voffset = 0.0
bb.gem.m38.voffset = 0.0
bb.gem.m39.voffset = 0.0

# strip counts: these are easy for the X/Y modules but less trivial for the U/V modules:

# to start with, we set the U/V layer strip count equal to 128 times the total number of APV cards.
# however, not all physical readout strips are connected to APV cards and not all APV cards have
# all channels connected to physical readout strips, so we probably will need an additional
# optional database parameter to specify the "strip offset" from the physical center of the GEM active area:
# for now, we keep nstripsu,v = 3,840 for the U/V strip GEMs, changing this parameter would change the definition of uoffset and voffset


bb.gem.m0.nstripsu = 1280
bb.gem.m0.nstripsv = 1536
bb.gem.m1.nstripsu = 1280
bb.gem.m1.nstripsv = 1536
bb.gem.m2.nstripsu = 1280
bb.gem.m2.nstripsv = 1536
bb.gem.m3.nstripsu = 1280
bb.gem.m3.nstripsv = 1536

bb.gem.m4.nstripsu = 1280
bb.gem.m4.nstripsv = 1536
bb.gem.m5.nstripsu = 1280
bb.gem.m5.nstripsv = 1536
bb.gem.m6.nstripsu = 1280
bb.gem.m6.nstripsv = 1536
bb.gem.m7.nstripsu = 1280
bb.gem.m7.nstripsv = 1536

bb.gem.m8.nstripsu = 1280
bb.gem.m8.nstripsv = 1536
bb.gem.m9.nstripsu = 1280
bb.gem.m9.nstripsv = 1536
bb.gem.m10.nstripsu = 1280
bb.gem.m10.nstripsv = 1536
bb.gem.m11.nstripsu = 1280
bb.gem.m11.nstripsv = 1536

bb.gem.m12.nstripsu = 1280
bb.gem.m12.nstripsv = 1536
bb.gem.m13.nstripsu = 1280
bb.gem.m13.nstripsv = 1536
bb.gem.m14.nstripsu = 1280
bb.gem.m14.nstripsv = 1536
bb.gem.m15.nstripsu = 1280
bb.gem.m15.nstripsv = 1536

bb.gem.m16.nstripsu = 1280
bb.gem.m16.nstripsv = 1536
bb.gem.m17.nstripsu = 1280
bb.gem.m17.nstripsv = 1536
bb.gem.m18.nstripsu = 1280
bb.gem.m18.nstripsv = 1536
bb.gem.m19.nstripsu = 1280
bb.gem.m19.nstripsv = 1536

bb.gem.m20.nstripsu = 1280
bb.gem.m20.nstripsv = 1536
bb.gem.m21.nstripsu = 1280
bb.gem.m21.nstripsv = 1536
bb.gem.m22.nstripsu = 1280
bb.gem.m22.nstripsv = 1536
bb.gem.m23.nstripsu = 1280
bb.gem.m23.nstripsv = 1536

bb.gem.m24.nstripsu = 1280
bb.gem.m24.nstripsv = 1536
bb.gem.m25.nstripsu = 1280
bb.gem.m25.nstripsv = 1536
bb.gem.m26.nstripsu = 1280
bb.gem.m26.nstripsv = 1536
bb.gem.m27.nstripsu = 1280
bb.gem.m27.nstripsv = 1536

bb.gem.m28.nstripsu = 1280
bb.gem.m28.nstripsv = 1536
bb.gem.m29.nstripsu = 1280
bb.gem.m29.nstripsv = 1536
bb.gem.m30.nstripsu = 1280
bb.gem.m30.nstripsv = 1536
bb.gem.m31.nstripsu = 1280
bb.gem.m31.nstripsv = 1536

bb.gem.m32.nstripsu = 1280
bb.gem.m32.nstripsv = 1536
bb.gem.m33.nstripsu = 1280
bb.gem.m33.nstripsv = 1536
bb.gem.m34.nstripsu = 1280
bb.gem.m34.nstripsv = 1536
bb.gem.m35.nstripsu = 1280
bb.gem.m35.nstripsv = 1536

bb.gem.m36.nstripsu = 1280
bb.gem.m36.nstripsv = 1536
bb.gem.m37.nstripsu = 1280
bb.gem.m37.nstripsv = 1536
bb.gem.m38.nstripsu = 1280
bb.gem.m38.nstripsv = 1536
bb.gem.m39.nstripsu = 1280
bb.gem.m39.nstripsv = 1536



# all modules have the same strip pitch along both dimensions, 0.4 mm:
bb.gem.upitch = 0.0004
bb.gem.vpitch = 0.0004

# tracking parameters:
bb.gem.threshold_sample = 50.0
bb.gem.threshold_stripsum = 250.0
bb.gem.threshold_clustersum = 500.0

bb.gem.ADCasym_cut = 0.5
bb.gem.deltat_cut = 30.0
bb.gem.corrcoeff_cut = 0.5
bb.gem.filterflag1D = 1
bb.gem.filterflag2D = 0

bb.gem.peakprominence_minsigma = 5.0
bb.gem.peakprominence_minfraction = 0.2

bb.gem.maxnu_charge = 4
bb.gem.maxnv_charge = 4

bb.gem.maxnu_pos = 2
bb.gem.maxnv_pos = 2

bb.gem.sigmahitshape = 0.0004 
bb.gem.sigmahitpos = 0.00015 # 0.15 mm or 150 um
bb.gem.trackchi2cut = 100.0
bb.gem.onlinezerosuppression = 0
bb.gem.zerosuppress_nsigma = 5.0
bb.gem.minhitsontrack = 3
bb.gem.maxhitcombos = 20000
bb.gem.maxhitcombos_inner = 20000
bb.gem.maxhitcombos_total = 1000000000
bb.gem.tryfasttrack = 1
bb.gem.gridbinwidthx = 0.01
bb.gem.gridbinwidthy = 0.01
bb.gem.gridedgetolerancex = 0.003
bb.gem.gridedgetolerancey = 0.003
bb.gem.useconstraint = 1

bb.gem.useopticsconstraint = 0
bb.gem.xptar_min = -0.25
bb.gem.xptar_max = 0.25
bb.gem.yptar_min = -0.08
bb.gem.yptar_max = -0.08
bb.gem.ytar_min = -0.08
bb.gem.ytar_max = 0.08
bb.gem.pmin = 0.5
bb.gem.pmax = 4.5

################### DECODE INFO ########################################################################
## Channel maps for decoding explained                                                                ##
## Each entry corresponds to one APV card                                                             ## 
## Crate = ROC ID = 20 for BigBite VTP                                                                ##
## Slot = 11 for BigBite VTP                                                                          ##
## fiber/mpd is fiber number for an MPD module, this is unique for each module within a VTP/SSP       ##
## gemid is unique "production ID" of a GEM module, not currently used by analysis but useful         ##
## for bookkeeping/tracking                                                                           ##
## adc_ch is the unique adc channel of this APV card within its associated MPD                        ##
## i2c is the "i2c address" of this APV card (not currently used by analysis)                         ##
## pos maps APV cards to physical locations on the detector                                           ##
## invert specifies whether strip index runs from "right-to-left" or "left-to-right" within an APV    ##
## axis specifies which strip orientation/dimension of the readout strips connected to this APV       ##
## ORDER of entries in the maps is:                                                                   ##
## crate   slot   fiber/mpd  gemid  adc_ch   i2c   pos     invert   axis                              ##
########################################################################################################

bb.gem.m0.chanmap = 
     20      11       7       3       0       3      29       1       1 
     20      11       7       3       1       2      28       1       1 
     20      11       7       3       2       1      27       1       1 
     20      11       7       3       3       0      26       1       1 
     20      11       7       3       4       7      25       1       1 
     20      11       7       3       5       6      24       1       1 
     20      11       7       3       6       5      23       1       1 
     20      11       7       3       7       4      22       1       1 
     20      11       7       3       8      11      21       1       1 
     20      11       7       3       9      10      20       1       1 
     20      11       7       3      10       9      19       1       1 
     20      11       7       3      11       8      18       1       1 
     20      11       7       3      12      15      17       1       1 
     20      11       7       3      13      14      16       1       1 
     20      11       7       3      14      13      15       1       1 
     20      11       8       3       0       3      11       1       1 
     20      11       8       3       1       2      10       1       1 
     20      11       8       3       2       1       9       1       1 
     20      11       8       3       3       0       8       1       1 
     20      11       8       3       4       7       7       1       1 
     20      11       8       3       5       6       6       1       1 
     20      11       8       3       6       5       5       1       1 
     20      11       8       3       7       4       4       1       1 
     20      11       8       3       8      11       3       1       1 
     20      11       8       3       9      10       2       1       1 
     20      11       8       3      10       9       1       1       1 
     20      11       8       3      11       8       0       1       1 
     20      11       8       3      12      15      14       1       1 
     20      11       8       3      13      14      13       1       1 
     20      11       8       3      14      13      12       1       1 
     20      11       9       3       0       3      26       0       0 
     20      11       9       3       1       2      27       0       0 
     20      11       9       3       2       1      28       0       0 
     20      11       9       3       3       0      29       0       0 
     20      11       9       3       4       7      22       0       0 
     20      11       9       3       5       6      23       0       0 
     20      11       9       3       6       5      24       0       0 
     20      11       9       3       7       4      25       0       0 
     20      11       9       3       8      11      18       0       0 
     20      11       9       3       9      10      19       0       0 
     20      11       9       3      10       9      20       0       0 
     20      11       9       3      11       8      21       0       0 
     20      11       9       3      12      15      15       0       0 
     20      11       9       3      13      14      16       0       0 
     20      11       9       3      14      13      17       0       0 
     20      11      10       3       0       3       8       0       0 
     20      11      10       3       1       2       9       0       0 
     20      11      10       3       2       1      10       0       0 
     20      11      10       3       3       0      11       0       0 
     20      11      10       3       4       7       4       0       0 
     20      11      10       3       5       6       5       0       0 
     20      11      10       3       6       5       6       0       0 
     20      11      10       3       7       4       7       0       0 
     20      11      10       3       8      11       0       0       0 
     20      11      10       3       9      10       1       0       0 
     20      11      10       3      10       9       2       0       0 
     20      11      10       3      11       8       3       0       0 
     20      11      10       3      12      15      12       0       0 
     20      11      10       3      13      14      13       0       0 
     20      11      10       3      14      13      14       0       0 
bb.gem.m1.chanmap = 
     20      11      16      24       0       0       9       0       0 
     20      11      16      24       1       1       7       0       0 
     20      11      16      24       2       2       5       0       0 
     20      11      16      24       3       3       3       0       0 
     20      11      16      24       4       4       1       0       0 
     20      11      17      24       4       0       7       0       1 
     20      11      17      24       3       1       5       0       1 
     20      11      17      24       2       2       3       0       1 
     20      11      17      24       1       3       1       0       1 
     20      11      18      24       0       0       0       1       0 
     20      11      18      24       1       1       2       1       0 
     20      11      18      24       2       2       4       1       0 
     20      11      18      24       3       3       6       1       0 
     20      11      18      24       4       4       8       1       0 
     20      11      19      24       0       0       0       1       1 
     20      11      19      24       1       1       2       1       1 
     20      11      19      24       2       2       4       1       1 
     20      11      19      24       3       3       6       1       1 
bb.gem.m2.chanmap = 
     20      11      16      15       5       8       9       0       0 
     20      11      16      15       6       9       7       0       0 
     20      11      16      15       7      10       5       0       0 
     20      11      16      15       8      11       3       0       0 
     20      11      16      15       9      12       1       0       0 
     20      11      17      15       9       8       7       0       1 
     20      11      17      15       8       9       5       0       1 
     20      11      17      15       7      10       3       0       1 
     20      11      17      15       6      11       1       0       1 
     20      11      18      15       5       8       0       1       0 
     20      11      18      15       6       9       2       1       0 
     20      11      18      15       7      10       4       1       0 
     20      11      18      15       8      11       6       1       0 
     20      11      18      15       9      12       8       1       0 
     20      11      19      15       9       8       0       1       1 
     20      11      19      15       8       9       2       1       1 
     20      11      19      15       7      10       4       1       1 
     20      11      19      15       6      11       6       1       1 
bb.gem.m3.chanmap = 
     20      11      16      12      10      16       9       0       0 
     20      11      16      12      11      17       7       0       0 
     20      11      16      12      12      18       5       0       0 
     20      11      16      12      13      19       3       0       0 
     20      11      16      12      14      20       1       0       0 
     20      11      17      12      10      16       7       0       1 
     20      11      17      12      11      17       5       0       1 
     20      11      17      12      12      18       3       0       1 
     20      11      17      12      13      19       1       0       1 
     20      11      18      12      10      16       0       1       0 
     20      11      18      12      11      17       2       1       0 
     20      11      18      12      12      18       4       1       0 
     20      11      18      12      13      19       6       1       0 
     20      11      18      12      14      20       8       1       0 
     20      11      19      12      14      16       0       1       1 
     20      11      19      12      13      17       2       1       1 
     20      11      19      12      12      18       4       1       1 
     20      11      19      12      11      19       6       1       1 
bb.gem.m4.chanmap = 
     20      11      11     104       0       3      29       1       1 
     20      11      11     104       1       2      28       1       1 
     20      11      11     104       2       1      27       1       1 
     20      11      11     104       3       0      26       1       1 
     20      11      11     104       4       7      25       1       1 
     20      11      11     104       5       6      24       1       1 
     20      11      11     104       6       5      23       1       1 
     20      11      11     104       7       4      22       1       1 
     20      11      11     104       8      11      21       1       1 
     20      11      11     104       9      10      20       1       1 
     20      11      11     104      10       9      19       1       1 
     20      11      11     104      11       8      18       1       1 
     20      11      11     104      12      15      17       1       1 
     20      11      11     104      13      14      16       1       1 
     20      11      11     104      14      13      15       1       1 
     20      11      12     104       0       3      11       1       1 
     20      11      12     104       1       2      10       1       1 
     20      11      12     104       2       1       9       1       1 
     20      11      12     104       3       0       8       1       1 
     20      11      12     104       4       7       7       1       1 
     20      11      12     104       5       6       6       1       1 
     20      11      12     104       6       5       5       1       1 
     20      11      12     104       7       4       4       1       1 
     20      11      12     104       8      11       3       1       1 
     20      11      12     104       9      10       2       1       1 
     20      11      12     104      10       9       1       1       1 
     20      11      12     104      11       8       0       1       1 
     20      11      12     104      12      15      14       1       1 
     20      11      12     104      13      14      13       1       1 
     20      11      12     104      14      13      12       1       1 
     20      11      13     104       0       3      26       0       0 
     20      11      13     104       1       2      27       0       0 
     20      11      13     104       2       1      28       0       0 
     20      11      13     104       3       0      29       0       0 
     20      11      13     104       4       7      22       0       0 
     20      11      13     104       5       6      23       0       0 
     20      11      13     104       6       5      24       0       0 
     20      11      13     104       7       4      25       0       0 
     20      11      13     104       8      11      18       0       0 
     20      11      13     104       9      10      19       0       0 
     20      11      13     104      10       9      20       0       0 
     20      11      13     104      11       8      21       0       0 
     20      11      13     104      12      15      15       0       0 
     20      11      13     104      13      14      16       0       0 
     20      11      13     104      14      13      17       0       0 
     20      11      14     104       0       3       8       0       0 
     20      11      14     104       1       2       9       0       0 
     20      11      14     104       2       1      10       0       0 
     20      11      14     104       3       0      11       0       0 
     20      11      14     104       4       7       4       0       0 
     20      11      14     104       5       6       5       0       0 
     20      11      14     104       6       5       6       0       0 
     20      11      14     104       7       4       7       0       0 
     20      11      14     104       8      11       0       0       0 
     20      11      14     104       9      10       1       0       0 
     20      11      14     104      10       9       2       0       0 
     20      11      14     104      11       8       3       0       0 
     20      11      14     104      12      15      12       0       0 
     20      11      14     104      13      14      13       0       0 
     20      11      14     104      14      13      14       0       0 
bb.gem.m5.chanmap = 
     20      11      20      18       0       0       9       0       0 
     20      11      20      18       1       1       7       0       0 
     20      11      20      18       2       2       5       0       0 
     20      11      20      18       3       3       3       0       0 
     20      11      20      18       4       4       1       0       0 
     20      11      21      18       4       0       7       0       1 
     20      11      21      18       3       1       5       0       1 
     20      11      21      18       2       2       3       0       1 
     20      11      21      18       1       3       1       0       1 
     20      11      22      18       0       0       0       1       0 
     20      11      22      18       1       1       2       1       0 
     20      11      22      18       2       2       4       1       0 
     20      11      22      18       3       3       6       1       0 
     20      11      22      18       4       4       8       1       0 
     20      11      23      18       0       0       0       1       1 
     20      11      23      18       1       1       2       1       1 
     20      11      23      18       2       2       4       1       1 
     20      11      23      18       3       3       6       1       1 
bb.gem.m6.chanmap = 
     20      11      20       0       5       8       9       0       0 
     20      11      20       0       6       9       7       0       0 
     20      11      20       0       7      10       5       0       0 
     20      11      20       0       8      11       3       0       0 
     20      11      20       0       9      12       1       0       0 
     20      11      21       0       5       8       7       0       1 
     20      11      21       0       6       9       5       0       1 
     20      11      21       0       7      10       3       0       1 
     20      11      21       0       8      11       1       0       1 
     20      11      22       0       5       8       0       1       0 
     20      11      22       0       6       9       2       1       0 
     20      11      22       0       7      10       4       1       0 
     20      11      22       0       8      11       6       1       0 
     20      11      22       0       9      12       8       1       0 
     20      11      23       0       5       8       0       1       1 
     20      11      23       0       6       9       2       1       1 
     20      11      23       0       7      10       4       1       1 
     20      11      23       0       8      11       6       1       1 
bb.gem.m7.chanmap = 
     20      11      20       4      10      16       9       0       0 
     20      11      20       4      11      17       7       0       0 
     20      11      20       4      12      18       5       0       0 
     20      11      20       4      13      19       3       0       0 
     20      11      20       4      14      20       1       0       0 
     20      11      21       4      10      16       7       0       1 
     20      11      21       4      11      17       5       0       1 
     20      11      21       4      12      18       3       0       1 
     20      11      21       4      13      19       1       0       1 
     20      11      22       4      10      16       0       1       0 
     20      11      22       4      11      17       2       1       0 
     20      11      22       4      12      18       4       1       0 
     20      11      22       4      13      19       6       1       0 
     20      11      22       4      14      20       8       1       0 
     20      11      23       4      10      16       0       1       1 
     20      11      23       4      11      17       2       1       1 
     20      11      23       4      12      18       4       1       1 
     20      11      23       4      13      19       6       1       1 
bb.gem.m8.chanmap = 
     20      11       0      13       0      15       0       1       1 
     20      11       0      13       1      14       1       1       1 
     20      11       0      13       2      13       2       1       1 
     20      11       0      13       3      12       3       1       1 
     20      11       0      13       4      11       4       1       1 
     20      11       0      13       5      10       5       1       1 
     20      11       0      13       6       9       6       1       1 
     20      11       0      13       7       8       7       1       1 
     20      11       0      13       8       7       8       1       1 
     20      11       0      13       9       6       9       1       1 
     20      11       0      13      10       5      10       1       1 
     20      11       0      13      11       4      11       1       1 
     20      11       4      13      10       4       9       1       0 
     20      11       4      13      11       3       8       1       0 
     20      11       4      13      12       2       7       1       0 
     20      11       4      13      13       1       6       1       0 
     20      11       4      13      14       0       5       1       0 
     20      11       5      13       0       4       0       0       0 
     20      11       5      13       1       3       1       0       0 
     20      11       5      13       2       2       2       0       0 
     20      11       5      13       3       1       3       0       0 
     20      11       5      13       4       0       4       0       0 
bb.gem.m9.chanmap = 
     20      11       1      20       0      15       0       1       1 
     20      11       1      20       1      14       1       1       1 
     20      11       1      20       2      13       2       1       1 
     20      11       1      20       3      12       3       1       1 
     20      11       1      20       4      11       4       1       1 
     20      11       1      20       5      10       5       1       1 
     20      11       1      20       6       9       6       1       1 
     20      11       1      20       7       8       7       1       1 
     20      11       1      20       8       7       8       1       1 
     20      11       1      20       9       6       9       1       1 
     20      11       1      20      10       5      10       1       1 
     20      11       1      20      11       4      11       1       1 
     20      11       4      20       5      12       9       1       0 
     20      11       4      20       6      11       8       1       0 
     20      11       4      20       7      10       7       1       0 
     20      11       4      20       8       9       6       1       0 
     20      11       4      20       9       8       5       1       0 
     20      11       5      20       5      12       0       0       0 
     20      11       5      20       6      11       1       0       0 
     20      11       5      20       7      10       2       0       0 
     20      11       5      20       8       9       3       0       0 
     20      11       5      20       9       8       4       0       0 
bb.gem.m10.chanmap = 
     20      11       2      17       0      15      11       0       1 
     20      11       2      17       1      14      10       0       1 
     20      11       2      17       2      13       9       0       1 
     20      11       2      17       3      12       8       0       1 
     20      11       2      17       4      11       7       0       1 
     20      11       2      17       5      10       6       0       1 
     20      11       2      17       6       9       5       0       1 
     20      11       2      17       7       8       4       0       1 
     20      11       2      17       8       7       3       0       1 
     20      11       2      17       9       6       2       0       1 
     20      11       2      17      10       5       1       0       1 
     20      11       2      17      11       4       0       0       1 
     20      11       4      17       0      20       9       1       0 
     20      11       4      17       1      19       8       1       0 
     20      11       4      17       2      18       7       1       0 
     20      11       4      17       3      17       6       1       0 
     20      11       4      17       4      16       5       1       0 
     20      11       5      17      10      20       0       0       0 
     20      11       5      17      11      19       1       0       0 
     20      11       5      17      12      18       2       0       0 
     20      11       5      17      13      17       3       0       0 
     20      11       5      17      14      16       4       0       0 
bb.gem.m11.chanmap = 
     20      11       3      25       0      15      11       0       1 
     20      11       3      25       1      14      10       0       1 
     20      11       3      25       2      13       9       0       1 
     20      11       3      25       3      12       8       0       1 
     20      11       3      25       4      11       7       0       1 
     20      11       3      25       5      10       6       0       1 
     20      11       3      25       6       9       5       0       1 
     20      11       3      25       7       8       4       0       1 
     20      11       3      25       8       7       3       0       1 
     20      11       3      25       9       6       2       0       1 
     20      11       3      25      10       5       1       0       1 
     20      11       3      25      11       4       0       0       1 
     20      11       6      25       0       4       9       1       0 
     20      11       6      25       1       3       8       1       0 
     20      11       6      25       2       2       7       1       0 
     20      11       6      25       3       1       6       1       0 
     20      11       6      25       4       0       5       1       0 
     20      11       6      25       8      12       0       0       0 
     20      11       6      25       9      11       1       0       0 
     20      11       6      25      10      10       2       0       0 
     20      11       6      25      11       9       3       0       0 
     20      11       6      25      12       8       4       0       0 


# TIME-DEPENDENT ENTRIES FOR DECODE MAP CHANGES (IF ANY)


-------[ 2021-09-22 09:22:00 ] # start of first run after fibers 2 and 3 swapped:

bb.gem.m10.chanmap = 
     20      11       3      17       0      15      11       0       1 
     20      11       3      17       1      14      10       0       1 
     20      11       3      17       2      13       9       0       1 
     20      11       3      17       3      12       8       0       1 
     20      11       3      17       4      11       7       0       1 
     20      11       3      17       5      10       6       0       1 
     20      11       3      17       6       9       5       0       1 
     20      11       3      17       7       8       4       0       1 
     20      11       3      17       8       7       3       0       1 
     20      11       3      17       9       6       2       0       1 
     20      11       3      17      10       5       1       0       1 
     20      11       3      17      11       4       0       0       1 
     20      11       4      17       0      20       9       1       0 
     20      11       4      17       1      19       8       1       0 
     20      11       4      17       2      18       7       1       0 
     20      11       4      17       3      17       6       1       0 
     20      11       4      17       4      16       5       1       0 
     20      11       5      17      10      20       0       0       0 
     20      11       5      17      11      19       1       0       0 
     20      11       5      17      12      18       2       0       0 
     20      11       5      17      13      17       3       0       0 
     20      11       5      17      14      16       4       0       0 
bb.gem.m11.chanmap = 
     20      11       2      25       0      15      11       0       1 
     20      11       2      25       1      14      10       0       1 
     20      11       2      25       2      13       9       0       1 
     20      11       2      25       3      12       8       0       1 
     20      11       2      25       4      11       7       0       1 
     20      11       2      25       5      10       6       0       1 
     20      11       2      25       6       9       5       0       1 
     20      11       2      25       7       8       4       0       1 
     20      11       2      25       8       7       3       0       1 
     20      11       2      25       9       6       2       0       1 
     20      11       2      25      10       5       1       0       1 
     20      11       2      25      11       4       0       0       1 
     20      11       6      25       0       4       9       1       0 
     20      11       6      25       1       3       8       1       0 
     20      11       6      25       2       2       7       1       0 
     20      11       6      25       3       1       6       1       0 
     20      11       6      25       4       0       5       1       0 
     20      11       6      25       8      12       0       0       0 
     20      11       6      25       9      11       1       0       0 
     20      11       6      25      10      10       2       0       0 
     20      11       6      25      11       9       3       0       0 
     20      11       6      25      12       8       4       0       0 

--------[ 2021-09-27 00:46:14 ] # start of first run after fibers 2 and 3 swapped back to original connections:
#
#      fixed mistake in fiber swap history. Module 10 (11) Y strips are on fiber 2 (3) before (after) the swap 
# 
bb.gem.m10.chanmap = 
     20      11       2      17       0      15      11       0       1 
     20      11       2      17       1      14      10       0       1 
     20      11       2      17       2      13       9       0       1 
     20      11       2      17       3      12       8       0       1 
     20      11       2      17       4      11       7       0       1 
     20      11       2      17       5      10       6       0       1 
     20      11       2      17       6       9       5       0       1 
     20      11       2      17       7       8       4       0       1 
     20      11       2      17       8       7       3       0       1 
     20      11       2      17       9       6       2       0       1 
     20      11       2      17      10       5       1       0       1 
     20      11       2      17      11       4       0       0       1 
     20      11       4      17       0      20       9       1       0 
     20      11       4      17       1      19       8       1       0 
     20      11       4      17       2      18       7       1       0 
     20      11       4      17       3      17       6       1       0 
     20      11       4      17       4      16       5       1       0 
     20      11       5      17      10      20       0       0       0 
     20      11       5      17      11      19       1       0       0 
     20      11       5      17      12      18       2       0       0 
     20      11       5      17      13      17       3       0       0 
     20      11       5      17      14      16       4       0       0 

bb.gem.m11.chanmap = 
     20      11       3      25       0      15      11       0       1 
     20      11       3      25       1      14      10       0       1 
     20      11       3      25       2      13       9       0       1 
     20      11       3      25       3      12       8       0       1 
     20      11       3      25       4      11       7       0       1 
     20      11       3      25       5      10       6       0       1 
     20      11       3      25       6       9       5       0       1 
     20      11       3      25       7       8       4       0       1 
     20      11       3      25       8       7       3       0       1 
     20      11       3      25       9       6       2       0       1 
     20      11       3      25      10       5       1       0       1 
     20      11       3      25      11       4       0       0       1 
     20      11       6      25       0       4       9       1       0 
     20      11       6      25       1       3       8       1       0 
     20      11       6      25       2       2       7       1       0 
     20      11       6      25       3       1       6       1       0 
     20      11       6      25       4       0       5       1       0 
     20      11       6      25       8      12       0       0       0 
     20      11       6      25       9      11       1       0       0 
     20      11       6      25      10      10       2       0       0 
     20      11       6      25      11       9       3       0       0 
     20      11       6      25      12       8       4       0       0 

############ END TIME-DEPENDENT DECODE MAP ENTRIES



################### BEGIN TIME-DEPENDENT ALIGNMENT ENTRIES ##################################

--------[ 2021-10-04 22:36:00 ] # start of run 1109, the first good run that I'm aware of with "final" alignment

bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =       0.5300309   -0.0009352402       0.1323192
bb.gem.m1.angle =      0.02040032      -0.2395929      -0.1484627
bb.gem.m2.position =    -0.004841307     0.002251292       0.1301795
bb.gem.m2.angle =     -0.00454369       0.0555466      -0.3602672
bb.gem.m3.position =      -0.5409744     0.005976331       0.1312271
bb.gem.m3.angle =      -0.1770143       0.1150538      -0.3739135
bb.gem.m4.position =    -0.007615015     0.006147694       0.2785995
bb.gem.m4.angle =     0.007217669      0.02774985      -0.2917705
bb.gem.m5.position =       0.5248454     0.003590538       0.4149689
bb.gem.m5.angle =      0.04011928     -0.05172014      -0.1495347
bb.gem.m6.position =     -0.01012342     0.004511144       0.4153096
bb.gem.m6.angle =      0.05874682       0.2238616     -0.02464266
bb.gem.m7.position =          -0.535               0          0.4112
bb.gem.m7.angle =               0               0               0
bb.gem.m8.position =      -0.7644073    0.0006477928        1.570592
bb.gem.m8.angle =     -0.06513717        -0.16519      -0.3436074
bb.gem.m9.position =      -0.2525128    -0.003198669         1.53115
bb.gem.m9.angle =      -0.2332181      -0.1432915      -0.3094737
bb.gem.m10.position =       0.2584583     -0.00895465        1.574429
bb.gem.m10.angle =     -0.07203803      -0.1235775      -0.2606025
bb.gem.m11.position =       0.7707726     -0.01274326        1.533101
bb.gem.m11.angle =      -0.3718366      -0.2452109       -0.273524

########################### END TIME-DEPENDENT ALIGNMENT PARAMETERS 

#################### BEGIN TIME-DEPENDENT GAIN MATCH PARAMETERS ##############################
-------[ 2021-01-01 00:00:00 ] # initially, we were running at lower HV, these parameters are from SBS-1 optics data:

#Module internal relative gains by APV card: 
bb.gem.m0.vgain = 1  1  0.922788  0.868468  0.84795  0.854752  0.840927  0.812182  0.824985  0.897269  0.909287  0.825  0.833803  0.852752  0.865516  0.895084  0.863674  0.912388  0.929856  0.946513  0.901281  0.937671  0.931435  0.927749  0.918065  0.904849  1.04538  1.07406  1.17524  1  
bb.gem.m0.ugain = 1  1.12969  0.982299  0.910987  0.917517  1.028  0.91389  0.969501  0.887228  0.967483  0.891437  0.932717  1  0.967796  0.932223  0.981003  1.02996  0.982872  1.04916  1.02479  1.04176  1.04898  1.10283  1.02383  1.08466  1.15114  1.1012  1.22265  1  1  
bb.gem.m1.vgain = 0.834677  0.936815  0.926078  0.992003  0.982374  0.959832  0.953892  1  
bb.gem.m1.ugain = 0.98402  1.14722  1.02382  1.17778  1.17857  1.12681  1.21804  1.02897  1.13128  1  
bb.gem.m2.vgain = 0.922182  0.992759  1.00046  1.01103  0.974527  0.990518  0.974219  1  
bb.gem.m2.ugain = 0.901511  0.96341  0.943244  1  1.00683  1.0195  1.03975  0.943573  1.05399  0.955832  
bb.gem.m3.vgain = 0.746919  0.855883  0.793305  0.898179  0.894198  0.94549  0.987106  1  
bb.gem.m3.ugain = 1  0.962197  1.01866  0.897486  0.91264  0.916954  0.92726  0.888314  0.842845  0.780455  
bb.gem.m4.vgain = 1  1  0.908483  0.861523  0.870762  0.894558  0.918363  0.86584  0.917447  0.900065  0.931988  0.888258  0.900339  0.866696  0.904625  0.895892  0.909609  0.901222  0.903116  0.966236  0.933901  0.905593  1.09444  0.915333  0.919532  0.911813  0.997771  1.0059  1.1446  1  
bb.gem.m4.ugain = 1  1.32552  1.1755  1  1.02688  0.969465  0.9567  1.02503  0.963719  1.00959  0.952652  0.946918  0.965749  1  0.9928  0.964212  0.975184  0.944532  1.00474  0.990463  0.958997  0.994467  0.987853  0.973374  0.996838  0.943026  1.24062  1.17362  1.27841  1  
bb.gem.m5.vgain = 1.00038  1.10874  0.936689  1.09039  1.08088  0.993479  0.975173  0.908546  
bb.gem.m5.ugain = 0.974903  0.970055  1.01891  0.979843  0.995483  0.991839  0.994148  0.926615  0.962828  1  
bb.gem.m6.vgain = 1.44504  1.4656  1.35181  1.38701  1.43499  1.3773  1.46336  1.3702  
bb.gem.m6.ugain = 1.20865  1.15118  1.03908  1  0.892997  0.851192  0.859832  0.899839  0.925309  0.933918  
bb.gem.m7.vgain = 1  1  1  1  1  1  1  1  
bb.gem.m7.ugain = 1  1  1  1  1  1  1  1  1  1  
bb.gem.m8.vgain = 1.20762  1.46186  1.47289  1.52728  1.42734  1.46237  1.54609  1.57153  1.38926  1.51197  1.39925  1.47964  
bb.gem.m8.ugain = 1.04355  1.08157  0.991193  0.980462  1.07556  1.01484  0.997567  0.981134  0.971901  1  
bb.gem.m9.vgain = 0.986325  1.07143  1.0652  1.05772  1.06236  1.16748  1.11773  1.18123  1.16681  1.12572  1.16477  1  
bb.gem.m9.ugain = 0.909907  0.859424  0.88184  0.833333  0.850128  0.915828  1.04332  0.896299  0.974283  1  
bb.gem.m10.vgain = 0.982756  0.953853  1.01486  0.9776  0.901376  0.974171  0.947625  0.991018  0.941061  0.900823  0.901122  0.720588  
bb.gem.m10.ugain = 1.02865  0.918693  0.931512  0.96831  1.02504  1  1.01036  1.06258  1.08999  1.16642  
bb.gem.m11.vgain = 1  1  1.33634  1.41503  1.44152  1.31617  1.30393  1.29733  1.2852  1.30906  1.17912  1  
bb.gem.m11.ugain = 1  0.917205  0.988728  0.975045  1.00739  1.01275  0.981746  0.977806  1.02512  1  

# Module average gains relative to target ADC peak position of 4000
bb.gem.m0.modulegain = 0.611979
bb.gem.m1.modulegain = 0.592877
bb.gem.m2.modulegain = 0.669019
bb.gem.m3.modulegain = 0.669415
bb.gem.m4.modulegain = 0.578455
bb.gem.m5.modulegain = 0.632566
bb.gem.m6.modulegain = 0.450249
bb.gem.m7.modulegain = 0.557015
bb.gem.m8.modulegain = 1.19897
bb.gem.m9.modulegain = 0.530478
bb.gem.m10.modulegain = 0.553906
bb.gem.m11.modulegain = 0.612277


######################### END TIME-DEPENDENT GAIN-MATCH PARAMETERS $$$$$$$$$$$$$$$$$$$$$$$$

###################### BEGIN TIME-DEPENDENT CLUSTERING PARAMETERS #############

-----------[ 2021-10-17 19:12:00 ] # new higher thresholds after GEM HV increase
bb.gem.threshold_sample = 150.0
bb.gem.threshold_stripsum = 500.0
bb.gem.threshold_clustersum = 1000.0

###############################################################################

###################### BEGIN TIME-DEPENDENT OPTICS constraints for track search #############

-----------[ 2021-01-01 00:00:00 ] # at SBS-1, the max. good electron momentum is about 1.5 GeV
bb.gem.useopticsconstraint = 1
bb.gem.xptar_min = -0.25
bb.gem.xptar_max = 0.25
bb.gem.yptar_min = -0.08
bb.gem.yptar_max = 0.08
bb.gem.ytar_min = -0.08
bb.gem.ytar_max = 0.08
bb.gem.pmin = 0.5
bb.gem.pmax = 1.5

----------[ 2021-10-21 00:00:00 ] # start of SBS-4 kinematics:

bb.gem.useopticsconstraint = 1
bb.gem.xptar_min = -0.3
bb.gem.xptar_max = 0.3
bb.gem.yptar_min = -0.09
bb.gem.yptar_max = 0.1
bb.gem.ytar_min = -0.08
bb.gem.ytar_max = 0.08
bb.gem.pmin = 0.7
bb.gem.pmax = 2.7


###############################################################################	

###################### BEGIN TIME-DEPENDENT CLUSTERING PARAMETERS #############

# turn off track search region constraint for zero-field runs in BB with sieve:
---------[ 2021-10-14 21:50:00 ]

bb.gem.useconstraint = 0
bb.gem.useopticsconstraint = 0

---------[ 2021-10-14 23:14:00 ]  

bb.gem.useconstraint = 0
bb.gem.useopticsconstraint = 0

###################### TIME-DEPENDENT PEDESTAL FILES ##########################

# time-dependent entries:
# default value from the beginning of time:
--------[ 2021-01-01 00:00:00 ]
bb.gem.pedfile = gemped/daq_ped_bb_gem_run220.dat

# new pedestals from run 814:

--------[ 2021-09-19 00:00:00 ]
bb.gem.pedfile = gemped/daq_ped_bb_gem_run814.dat

--------[ 2021-09-21 14:30:00 ]
bb.gem.pedfile = gemped/daq_ped_bb_gem_run902.dat

-------[ 2021-09-22 09:22:00 ] # start of first run after fibers 2 and 3 swapped:
#------[ 2021-09-25 06:45:00 ]
bb.gem.pedfile = gemped/daq_ped_bb_gem_run10363.dat

--------[ 2021-09-27 00:46:14 ] # start of first run after fibers 2 and 3 swapped back to original connections:
bb.gem.pedfile = gemped/daq_ped_bb_gem_run10431.dat

--------[ 2021-09-30 12:40:00 ] # new pedestals from run 1053
bb.gem.pedfile = gemped/daq_ped_bb_gem_run1053.dat

--------[ 2021-10-06 22:56:00 ] # new pedestals from run 1115
bb.gem.pedfile = gemped/daq_ped_bb_gem_run1115.dat

--------[ 2021-10-11 12:27:00 ] # run 10975
bb.gem.pedfile = gemped/daq_ped_bb_gem_run10975.dat

--------[ 2021-10-14 01:56:00 ] # run 11072
bb.gem.pedfile = gemped/daq_ped_bb_gem_run11072.dat

--------[ 2021-10-21 09:00:00 ] # run 11440
bb.gem.pedfile = gemped/daq_ped_bb_gem_run11440.dat

--------[ 2021-10-21 17:00:00 ] # run 11462
bb.gem.pedfile = gemped/daq_ped_bb_gem_run11462.dat

--------[ 2021-11-12 17:00:00 ] # run 11462
bb.gem.pedfile = gemped/daq_ped_bb_gem_run11936.dat

#################### END OF TIME-DEPENDENT PEDESTAL FILES #########################


######################## TIME-DEPENDENT COMMON-MODE PARAMETERS ###############################
## THESE ARE ASSOCIATED WITH THE SAME TIME STAMPS ABOVE, BUT WE ORGANIZE THEM INTO THEIR    ## 
## OWN SECTION FOR READABILITY AND CLARITY                                                  ##
##############################################################################################

# default from the beginning of time to september 19, 2021:
#Mon Sep 20 15:42:48 2021
# Copy the contents of this file into $DB_DIR/db_bb.gem.dat to use these pedestals for analysis
# format = detname.commonmode_mean(U,V) and detname.commonmode_rms(U,V) = common-mode mean and RMS for U, V strips by APV card in order of position

#Tue Aug 24 11:00:51 2021
# Copy the contents of this file into $DB_DIR/db_bb.gem.dat to use these pedestals for analysis
# format = detname.commonmode_mean(U,V) and detname.commonmode_rms(U,V) = common-mode mean and RMS for U, V strips by APV card in order of position
----------[ 2021-01-01 00:00:00 ]
bb.gem.m0.commonmode_meanU = 
           490.99            406.03            547.52            360.42            273.57            504.36            335.14            544.19            304.93            470.43             343.2            367.04            506.57            405.28            473.48             518.4 
           546.14            494.38            517.94             346.5            449.82            551.09            542.17            477.48            485.24            508.49            465.76            392.41            595.47            414.46 
bb.gem.m0.commonmode_rmsU = 
           10.524            9.2513            9.4773             9.527            11.437            12.403            14.011            14.427            9.8783            12.444            11.746            13.735              8.65            10.336            14.219            9.5153 
           11.016            13.508            11.764            10.993             13.85            19.205            15.913            12.885            14.131            23.777            14.586            11.483            12.809            13.228 
bb.gem.m0.commonmode_meanV = 
           421.03            328.65            601.23            466.03            521.86            529.36             426.8            427.27            366.37             509.8            475.98            319.99             434.4            473.04            497.24            426.58 
           487.51            571.94             524.5            508.56            549.63             464.2            475.91            551.61             270.5            469.59            480.85             458.7            482.47            515.14 
bb.gem.m0.commonmode_rmsV = 
           11.637            11.614            13.246             12.71            13.735            14.588            16.944            13.892                10            9.7629            13.974              12.9             7.955            9.2851            13.188            9.7717 
           9.7133            14.057            10.351            10.847            13.302            17.551            9.3406            10.931            12.862            17.463            10.086            10.226            13.912            13.767 


bb.gem.m1.commonmode_meanU = 
           418.83            412.16            450.74            505.18            533.17            489.39            458.39            473.13            504.04            494.44 
bb.gem.m1.commonmode_rmsU = 
           55.386            40.214            57.103             35.03            60.746            30.311            54.716            33.133             55.41            37.793 
bb.gem.m1.commonmode_meanV = 
           498.36            559.88            407.79            469.71            448.92            458.64            408.41             551.2 
bb.gem.m1.commonmode_rmsV = 
            62.33            45.839            51.436            56.581            47.673            58.785            47.809            67.233 


bb.gem.m2.commonmode_meanU = 
           496.86            475.04            471.67             454.7            471.71            443.76            510.57             415.2            427.77            396.97 
bb.gem.m2.commonmode_rmsU = 
           41.474            37.679            45.192            32.358            48.169            30.356            52.703            32.787            57.986            41.121 
bb.gem.m2.commonmode_meanV = 
           438.62            581.12            523.27            528.73             416.2            588.68            442.51            500.85 
bb.gem.m2.commonmode_rmsV = 
           43.744            76.222            47.172            79.476            46.158            84.642            44.599            84.335 


bb.gem.m3.commonmode_meanU = 
           479.53            487.06            546.11            316.06            533.51            435.86            483.71             540.1            542.96            430.58 
bb.gem.m3.commonmode_rmsU = 
           52.025            45.958            52.697            36.427            49.671            36.145            57.636            42.987            66.316            49.403 
bb.gem.m3.commonmode_meanV = 
            477.9            433.17            451.01            600.52            440.46            532.86            526.41            395.35 
bb.gem.m3.commonmode_rmsV = 
           38.457            87.291            54.543            82.175            56.589            82.732            54.213             53.44 


bb.gem.m4.commonmode_meanU = 
           445.82            471.93            465.32            509.44            482.32            295.53            491.22            495.59            479.34            492.65            458.92            469.49            380.96            473.66             458.1            375.79 
           497.81            504.11            493.02            579.25            499.73            480.72            494.11            498.54            517.03            466.77            512.94            519.08             567.8            556.55 
bb.gem.m4.commonmode_rmsU = 
            8.154            9.2791            11.858            14.493            12.464              9.94            10.031            15.983            12.808            11.122            9.5349            11.036            13.199            11.125            20.241            10.952 
           8.9187            15.569            14.833            8.7499            10.096            20.579            19.879            10.515            8.8489            27.496            8.9857            8.0921            9.4016            8.7169 
bb.gem.m4.commonmode_meanV = 
           256.66            358.51            238.07            438.45            329.79            532.18            528.95             431.5            672.42             504.8            466.89            520.12            519.92            455.78            429.24            525.65 
           369.85            458.92            375.07            562.91            502.71            312.27            423.62            441.14            573.79             617.7            531.07            590.08            481.18            486.32 
bb.gem.m4.commonmode_rmsV = 
           7.7742            7.5612            9.0081            9.9907            11.736             11.24            14.774            20.146            13.043            8.4474            12.426            15.224             9.314            9.4978            17.782            11.984 
           10.408            16.711            14.608            8.9515            12.147            20.116            21.508            8.4621             12.15            37.364            16.047            9.3415             10.58            10.185 


bb.gem.m5.commonmode_meanU = 
           480.57            529.42            510.92            419.19            463.15             479.2            469.74            430.42            443.75            502.11 
bb.gem.m5.commonmode_rmsU = 
           34.628            38.812            34.106            39.534            32.983            34.096             33.39             30.81            38.827            34.561 
bb.gem.m5.commonmode_meanV = 
           342.62            556.03            483.93            471.79            458.58            485.09             392.7            463.68 
bb.gem.m5.commonmode_rmsV = 
           61.994            48.767            53.065            44.044            53.971            47.546            52.124            47.931 


bb.gem.m6.commonmode_meanU = 
           404.96            382.42            532.71            354.05            421.21            408.61            398.78            534.13            450.01            505.03 
bb.gem.m6.commonmode_rmsU = 
           48.877            44.142            38.471            34.419            31.537             24.41            33.552             39.55            52.016            45.281 
bb.gem.m6.commonmode_meanV = 
           464.05            554.85             507.1            515.76            506.64            464.77            482.48            407.23 
bb.gem.m6.commonmode_rmsV = 
               65            68.527            61.381            59.597            61.237            64.431            71.307            57.339 


bb.gem.m7.commonmode_meanU = 
            446.5            443.66            473.64            436.86            462.15            529.09            423.35            466.67            358.91            359.53 
bb.gem.m7.commonmode_rmsU = 
           63.951            43.602            39.478            36.749            34.979            43.252            43.349            56.482            58.375            74.335 
bb.gem.m7.commonmode_meanV = 
           515.69            374.42            536.28            412.93            459.97            432.24            419.62             433.4 
bb.gem.m7.commonmode_rmsV = 
           60.382            4.4699            75.569            72.028            66.573            69.633            58.202            69.422 


bb.gem.m8.commonmode_meanU = 
           527.84             613.9            575.68            448.83            606.15            456.89            510.36            530.12               494            538.11 
bb.gem.m8.commonmode_rmsU = 
           8.6434            7.9871            7.9487            8.2567            8.6578            8.9919            7.4099            9.9575            10.027            12.878 
bb.gem.m8.commonmode_meanV = 
           606.74            697.27             516.7            614.86            693.27            516.96            763.79            762.15            603.11            579.45             616.7            757.04 
bb.gem.m8.commonmode_rmsV = 
            9.092            6.4767            9.4352            7.7495            6.8697            7.0946            8.3046            7.4056            7.1353            9.2061            6.5941            8.7102 


bb.gem.m9.commonmode_meanU = 
           549.74            406.46            532.36             400.4            660.19            395.55            513.77            362.21            502.49            502.16 
bb.gem.m9.commonmode_rmsU = 
           13.155            8.8362             10.58            12.635            11.736            8.3171            8.5939            7.4843            8.2079            10.904 
bb.gem.m9.commonmode_meanV = 
           537.73            710.68            574.44            512.57            642.66            667.01             722.8            672.97            613.14            657.53            615.54            189.66 
bb.gem.m9.commonmode_rmsV = 
            16.97              8.53            9.6817            7.6256            7.1732            7.7838            8.3784            7.6909            7.9491            7.2995            7.6477            1.4925 


bb.gem.m10.commonmode_meanU = 
           495.42            303.78            293.39            519.22            522.26            536.72            594.75            557.33            556.12            480.66 
bb.gem.m10.commonmode_rmsU = 
           11.561            10.373            9.0851            9.4012            10.368            9.1834            9.8128            9.9794            9.5952            10.155 
bb.gem.m10.commonmode_meanV = 
           655.86            418.24            754.04            660.08            468.91            612.73            575.38            550.06            452.52            389.26            562.23            583.09 
bb.gem.m10.commonmode_rmsV = 
           11.526            8.3887            8.8723            8.2499            7.7654            9.4968            9.2299            9.3869            8.1369            11.085            7.9543            12.898 


bb.gem.m11.commonmode_meanU = 
           491.55            423.57            452.29            462.17            490.72            738.19            793.78            629.98            792.41            711.74 
bb.gem.m11.commonmode_rmsU = 
           8.8906            7.6693            9.9811            9.0147            9.3932            9.8951            9.3552            10.955            12.768            9.7872 
bb.gem.m11.commonmode_meanV = 
           602.57            673.62            553.17            605.13            537.91            618.25            501.74            391.66            397.54            373.32            443.34            464.75 
bb.gem.m11.commonmode_rmsV = 
            10.27            7.4577             8.261            8.7531            8.6486            9.1007            8.6674            8.3121            8.4997            9.3674            7.7888            18.332 




#################### END OF TIME-DEPENDENT COMMON-MODE PARAMETERS ############################

